(()=>{"use strict";var t={formSelector:".form",inputSelector:".form__input",submittingButtonSelector:".form__submit",inputErrorSelector:".error",submittingButtonInvalid:"form__submit_invalid",inputInvalid:"form__input_invalid",errorVisible:"error_visible"};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,o(r.key),r)}}function r(t,e,n){return(e=o(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n);if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"===e(n)?n:String(n)}var i=function(){function t(e,n,o){var i=this,a=o.handleCardClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"_toggleLike",(function(){i._likeBtn.classList.toggle("element__like_active")})),r(this,"_clickRemove",(function(){i._card.remove(),i._template=null,i._card=null})),this._title=e,this._url=n,this._templateSelector=".template",this._template=document.querySelector(this._templateSelector).content,this._card=this._template.querySelector(".element").cloneNode(!0),this._text=this._card.querySelector(".element__title"),this._img=this._card.querySelector(".element__image"),this._removeBtn=this._card.querySelector(".element__remove"),this._likeBtn=this._card.querySelector(".element__like"),this._handleCardClick=a}var e,o;return e=t,(o=[{key:"_createCard",value:function(){this._setEventListeners(),this._insertData()}},{key:"_setEventListeners",value:function(){var t=this;this._img.addEventListener("click",(function(){t._handleCardClick(t._img.src,t._img.alt,t._text.textContent)})),this._likeBtn.addEventListener("click",this._toggleLike),this._removeBtn.addEventListener("click",this._clickRemove)}},{key:"_insertData",value:function(){this._img.src=this._url,this._img.alt=this._title,this._text.textContent=this._title}},{key:"getCard",value:function(){return this._createCard(),this._card}}])&&n(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===a(o)?o:String(o)),r)}var o}var l=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._validationData=e,this._validationObject=n,this._submittingButton=this._validationObject.querySelector(this._validationData.submittingButtonSelector),this._inputList=Array.from(this._validationObject.querySelectorAll(this._validationData.inputSelector))}var e,n;return e=t,(n=[{key:"enableValidation",value:function(){this._setEventListener()}},{key:"validateOnOpen",value:function(){var t=this;this._inputList.every((function(t){return""===t.value}))?this._toggleSubmitState():(this._toggleSubmitState(),this._inputList.forEach((function(e){t._checkInputValidity(e)})))}},{key:"_setEventListener",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleSubmitState()}))}))}},{key:"_showInputError",value:function(t,e){var n=this._validationObject.querySelector("#".concat(t.name,"-error"));t.classList.add(this._validationData.inputInvalid),n.classList.add(this._validationData.errorVisible),n.textContent=e}},{key:"_hideInputError",value:function(t){var e=this._validationObject.querySelector("#".concat(t.name,"-error"));t.classList.remove(this._validationData.inputInvalid),e.classList.remove(this._validationData.errorVisible),e.textContent=""}},{key:"_toggleSubmitState",value:function(){this._checkIfAllInputIsValid()?(this._submittingButton.classList.remove(this._validationData.submittingButtonInvalid),this._submittingButton.removeAttribute("disabled")):(this._submittingButton.classList.add(this._validationData.submittingButtonInvalid),this._submittingButton.setAttribute("disabled",!0))}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_checkIfAllInputIsValid",value:function(){return this._inputList.every((function(t){return t.validity.valid}))}}])&&u(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===c(o)?o:String(o)),r)}var o}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._selector=e,this._popup=document.querySelector(this._selector),this._popupCloseBtn=this._popup.querySelector(".popup__close-btn"),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){e.target===e.currentTarget&&t.close()})),this._popupCloseBtn.addEventListener("click",(function(){t.close()}))}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}}])&&s(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==p(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===p(o)?o:String(o)),r)}var o}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=m(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function m(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function d(t,e){if(e&&("object"===p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=h(r);if(o){var n=h(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return d(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._img=e._popup.querySelector(".popup__image"),e._text=e._popup.querySelector(".popup__text"),e}return e=a,(n=[{key:"open",value:function(t,e,n){this._img.src=t,this._img.alt=e,this._text.textContent=n,v(h(a.prototype),"open",this).call(this)}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==g(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===g(o)?o:String(o)),r)}var o}var k=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(t,e){"top"===e?this._container.prepend(t):this._container.append(t)}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==w(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===w(o)?o:String(o)),r)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=E(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function E(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=L(t)););return t}function P(t,e){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},P(t,e)}function C(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},L(t)}var I=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&P(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=L(r);if(o){var n=L(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return C(this,t)});function a(t,e){var n,r=e.openCallback,o=e.submitCallback;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._openCallback=r,n._submitCallback=o,n._form=n._popup.querySelector(".form"),n._formInputs=n._form.querySelectorAll(".form__input"),n}return e=a,(n=[{key:"setEventListeners",value:function(){var t=this;O(L(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),e.stopImmediatePropagation(),t._submitCallback(t._getInputValues()),t.close()}))}},{key:"open",value:function(){O(L(a.prototype),"open",this).call(this),this._openCallback()}},{key:"close",value:function(){this._form.reset(),O(L(a.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var t={};return this._formInputs.forEach((function(e){var n=e.name,r=e.value;t[n]=r})),t}}])&&j(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(f);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!==q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r.key,"string"),"symbol"===q(o)?o:String(o)),r)}var o}var B=function(){function t(e){var n=e.profileNameSel,r=e.profileJobSel;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileJob=document.querySelector(r),console.log(this._profileName)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileJob.textContent=t.job}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),R=document.querySelector(".profile__edit-btn"),T=document.querySelector(".profile__add-btn"),D=document.querySelector(".popup_type_edit-card"),V=D.querySelector(".form-edit"),A=D.querySelector(".form__input_field-name"),N=D.querySelector(".form__input_field-job"),J=document.querySelector(".popup_type_add-card").querySelector(".form-add"),U=".elements",z=document.querySelector(U),M=new l(t,V);M.enableValidation();var F=new l(t,J);F.enableValidation();var G=new k({renderer:function(t){var e=X(t.name,t.link);G.addItem(e,"bottom")}},U);G.renderItems([{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}]);var H=new B({profileNameSel:".profile__name",profileJobSel:".profile__job"}),K=new I(".popup_type_edit-card",{openCallback:function(){var t=H.getUserInfo();A.value=t.name,N.value=t.job,M.validateOnOpen()},submitCallback:function(t){H.setUserInfo(t)}});K.setEventListeners();var Q=new I(".popup_type_add-card",{openCallback:function(){F.validateOnOpen()},submitCallback:function(t){var e;e=X(t.place,t.url),z.prepend(e)}});Q.setEventListeners();var W=new _(".popup_type_pic");function X(t,e){return new i(t,e,{handleCardClick:function(t,e,n){W.open(t,e,n)}}).getCard()}W.setEventListeners(),R.addEventListener("click",(function(){K.open()})),T.addEventListener("click",(function(){Q.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxLQUFNLG9GQUVSLENBQ0UxRSxLQUFNLHFCQUNOMEUsS0FBTSw2RkFFUixDQUNFMUUsS0FBTSxTQUNOMEUsS0FBTSxtRlFtQlYsSUFBTUcsRUFBVyxJQUFJM0IsRUFBUyxDQUFFQyxlQUFnQixpQkFBa0JDLGNBQWUsa0JBRzNFMEIsRUFBb0IsSUFBSTFDLEVBQzVCLHdCQUNBLENBQ0VDLGFBQWMsV0FDWixJQUFNMEMsRUFBZUYsRUFBU0csY0FDOUJsQixFQUFVcEUsTUFBUXFGLEVBQWEvRSxLQUMvQitELEVBQVNyRSxNQUFRcUYsRUFBYXRCLElBQzlCVSxFQUFxQmMsZ0JBQ3ZCLEVBQ0EzQyxlQUFnQixTQUFDUyxHQUNmOEIsRUFBU0ssWUFBWW5DLEVBQ3ZCLElBR0orQixFQUFrQkssb0JBR2xCLElBQU1DLEVBQXVCLElBQUloRCxFQUMvQix1QkFDQSxDQUNFQyxhQUFjLFdBQ1pnQyxFQUFvQlksZ0JBQ3RCLEVBQ0EzQyxlQUFnQixTQUFDUyxHQStCZCxJQUFpQnlCLElBOUJMQyxFQUFXMUIsRUFBWXNDLE1BQU90QyxFQUFZOUYsS0FnQ3ZEaUgsRUFBaUJoQyxRQUFRc0MsRUE5QjNCLElBR0pZLEVBQXFCRCxvQkFHckIsSUFBTUcsRUFBaUIsSUFBSS9ELEVBQWUsbUJBUW5DLFNBQVNrRCxFQUFXekgsRUFBT0MsR0FVaEMsT0FUYSxJQUFJRixFQUNmQyxFQUNBQyxFQUNBLENBQ0VDLGdCQUFpQixTQUFDc0UsRUFBUUMsRUFBUUMsR0FDaEM0RCxFQUFlQyxLQUFLL0QsRUFBUUMsRUFBUUMsRUFDdEMsSUFFRjhELFNBRUosQ0FsQkFGLEVBQWVILG9CQUdmekIsRUFBV25GLGlCQUFpQixTQUFTLFdBQVF1RyxFQUFrQlMsTUFBTyxJQUN0RTVCLEVBQWNwRixpQkFBaUIsU0FBUyxXQUFRNkcsRUFBcUJHLE1BQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVmYXVsdCBkYXRhXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiAn0JDRgNGF0YvQtycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2NoZWx5YWJpbnNrLW9ibGFzdC5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICfQmtCw0LzRh9Cw0YLQutCwJyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJyxcbiAgfSxcbl07XG5jb25zdCB2YWxpZGF0aW9uRGF0YSA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgc3VibWl0dGluZ0J1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3N1Ym1pdCcsXG4gIGlucHV0RXJyb3JTZWxlY3RvcjogJy5lcnJvcicsXG4gIHN1Ym1pdHRpbmdCdXR0b25JbnZhbGlkOiAnZm9ybV9fc3VibWl0X2ludmFsaWQnLFxuICBpbnB1dEludmFsaWQ6ICdmb3JtX19pbnB1dF9pbnZhbGlkJyxcbiAgZXJyb3JWaXNpYmxlOiAnZXJyb3JfdmlzaWJsZSdcbn07XG5cblxuZXhwb3J0IHtpbml0aWFsQ2FyZHMsIHZhbGlkYXRpb25EYXRhfTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHRpdGxlLCB1cmwsIHsgaGFuZGxlQ2FyZENsaWNrIH0pIHtcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICAgIHRoaXMuX3VybCA9IHVybDtcblxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSAnLnRlbXBsYXRlJztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcikuY29udGVudDtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fdGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fdGV4dCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJyk7XG4gICAgdGhpcy5faW1nID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcbiAgICB0aGlzLl9yZW1vdmVCdG4gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19yZW1vdmUnKTtcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgX2NyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9pbnNlcnREYXRhKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW1nLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKFxuICAgICAgICB0aGlzLl9pbWcuc3JjLFxuICAgICAgICB0aGlzLl9pbWcuYWx0LFxuICAgICAgICB0aGlzLl90ZXh0LnRleHRDb250ZW50XG4gICAgICApO1xuICAgIH0pO1xuICAgIHRoaXMuX2xpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl90b2dnbGVMaWtlKTtcbiAgICB0aGlzLl9yZW1vdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbGlja1JlbW92ZSk7XG4gIH1cblxuICBfdG9nZ2xlTGlrZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcbiAgfVxuXG4gIF9jbGlja1JlbW92ZSA9ICgpID0+IHtcbiAgICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gICAgICB0aGlzLl90ZW1wbGF0ZSA9IG51bGw7XG4gICAgICB0aGlzLl9jYXJkID0gbnVsbDtcbiAgfVxuXG4gIF9pbnNlcnREYXRhKCkge1xuICAgIHRoaXMuX2ltZy5zcmMgPSB0aGlzLl91cmw7XG4gICAgdGhpcy5faW1nLmFsdCA9IHRoaXMuX3RpdGxlO1xuICAgIHRoaXMuX3RleHQudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgfVxuXG4gIGdldENhcmQoKSB7XG4gICAgdGhpcy5fY3JlYXRlQ2FyZCgpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yICh2YWxpZGF0aW9uRGF0YSwgdmFsaWRhdGlvbk9iamVjdCkge1xuICAgIHRoaXMuX3ZhbGlkYXRpb25EYXRhID0gdmFsaWRhdGlvbkRhdGE7XG4gICAgdGhpcy5fdmFsaWRhdGlvbk9iamVjdCA9IHZhbGlkYXRpb25PYmplY3Q7XG4gICAgdGhpcy5fc3VibWl0dGluZ0J1dHRvbiA9IHRoaXMuX3ZhbGlkYXRpb25PYmplY3QucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0aW9uRGF0YS5zdWJtaXR0aW5nQnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fdmFsaWRhdGlvbk9iamVjdC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRpb25EYXRhLmlucHV0U2VsZWN0b3IpKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcigpO1xuICB9XG4gIFxuICB2YWxpZGF0ZU9uT3BlbigpIHtcbiAgICAvLyBJZiBubyBpbnB1dCBpcyBtYWRlLCBzaG93IG5vIGVycm9yXG4gICAgY29uc3QgaW5wdXRJc0VtcHR5ID0gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dEVsZW1lbnQpID0+IHsgXG4gICAgICByZXR1cm4gaW5wdXRFbGVtZW50LnZhbHVlID09PSAnJzsgXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKGlucHV0SXNFbXB0eSkgeyBcbiAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdFN0YXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fdG9nZ2xlU3VibWl0U3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgIH0pXG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICAvLyBRdWVyeWluZyBldmVyeSAuZm9ybV9faW5wdXRcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIC8vIEhhbmRsaW5nIEVycm9yIG1lc3NhZ2UgKHNwYW4pICYgUmVkIHVuZGVybGluZSB3YXJuaW5nXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAvLyBIYW5kbGluZyBTdWJtaXQgQnV0dG9uIHN0YXRlOlxuICAgICAgICB0aGlzLl90b2dnbGVTdWJtaXRTdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl92YWxpZGF0aW9uT2JqZWN0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGlvbkRhdGEuaW5wdXRJbnZhbGlkKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0aW9uRGF0YS5lcnJvclZpc2libGUpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl92YWxpZGF0aW9uT2JqZWN0LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50Lm5hbWV9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGlvbkRhdGEuaW5wdXRJbnZhbGlkKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uRGF0YS5lcnJvclZpc2libGUpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX3RvZ2dsZVN1Ym1pdFN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9jaGVja0lmQWxsSW5wdXRJc1ZhbGlkKCkpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdHRpbmdCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0aW9uRGF0YS5zdWJtaXR0aW5nQnV0dG9uSW52YWxpZCk7XG4gICAgICB0aGlzLl9zdWJtaXR0aW5nQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0dGluZ0J1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRpb25EYXRhLnN1Ym1pdHRpbmdCdXR0b25JbnZhbGlkKTtcbiAgICAgIHRoaXMuX3N1Ym1pdHRpbmdCdXR0b24uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIF9jaGVja0lmQWxsSW5wdXRJc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuIGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9wb3B1cENsb3NlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idG4nKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpOyBcbiAgICB9XG5cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcblxuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgLy8gQ2xvc2luZyBieSBjbGljayBvbiBPdmVybGF5XG4gICAgICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQgPT09IGV2dC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQ2xvc2luZyBieSBjbGljayBvbiBDbG9zZSBCdXR0b25cbiAgICAgICAgdGhpcy5fcG9wdXBDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faW1nID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuICAgICAgICB0aGlzLl90ZXh0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0Jyk7XG4gICAgfVxuXG4gICAgb3BlbihpbWdTcmMsIGltZ0FsdCwgdGV4dCkge1xuICAgICAgICB0aGlzLl9pbWcuc3JjID0gaW1nU3JjO1xuICAgICAgICB0aGlzLl9pbWcuYWx0ID0gaW1nQWx0O1xuICAgICAgICB0aGlzLl90ZXh0LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgc3VwZXIub3BlbigpO1xuICAgIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGl0ZW0sIHBvcykge1xuICAgICAgICBwb3MgPT09ICd0b3AnXG4gICAgICAgICAgICA/IHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pXG4gICAgICAgICAgICA6IHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoaXRlbSk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCB7IG9wZW5DYWxsYmFjaywgc3VibWl0Q2FsbGJhY2sgfSkge1xuICAgICAgICBzdXBlcihzZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX29wZW5DYWxsYmFjayA9IG9wZW5DYWxsYmFjaztcbiAgICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRDYWxsYmFjaztcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXZ0LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0Q2FsbGJhY2sodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICAgICAgdGhpcy5fb3BlbkNhbGxiYWNrKCk7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dHMuZm9yRWFjaCgoZm9ybUlucHV0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBmb3JtSW5wdXQubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IHZhbCA9IGZvcm1JbnB1dC52YWx1ZTtcbiAgICAgICAgICAgIGlucHV0VmFsdWVzW2tleV0gPSB2YWw7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgICB9XG5cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyBwcm9maWxlTmFtZVNlbCwgcHJvZmlsZUpvYlNlbCB9KSB7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlTmFtZVNlbCk7XG4gICAgICAgIHRoaXMuX3Byb2ZpbGVKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVKb2JTZWwpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLl9wcm9maWxlTmFtZSk7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgICAgICAgY29uc3Qgam9iID0gdGhpcy5fcHJvZmlsZUpvYi50ZXh0Q29udGVudDtcbiAgICAgICAgcmV0dXJuIHsgbmFtZSwgam9iIH07XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpIHtcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBpbnB1dFZhbHVlcy5uYW1lO1xuICAgICAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gaW5wdXRWYWx1ZXMuam9iO1xuICAgIH1cblxufSIsIi8vIEltcG9ydHNcbmltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCB2YWxpZGF0aW9uRGF0YSB9IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuXG4vLyBQcm9maWxlIGVsZW1lbnRzXG5jb25zdCBlZGl0aW5nQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnRuJyk7XG5jb25zdCBhZGRpbmdDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idG4nKTtcblxuLy8gUG9wdXAgZWRpdC1jYXJkIGVsZW1lbnRzXG5jb25zdCBwb3B1cEVkaXRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdC1jYXJkJyk7XG5jb25zdCBlZGl0aW5nRm9ybSA9IHBvcHVwRWRpdENhcmQucXVlcnlTZWxlY3RvcignLmZvcm0tZWRpdCcpO1xuY29uc3QgaW5wdXROYW1lID0gcG9wdXBFZGl0Q2FyZC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfZmllbGQtbmFtZScpO1xuY29uc3QgaW5wdXRKb2IgPSBwb3B1cEVkaXRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF9maWVsZC1qb2InKTtcblxuLy8gUG9wdXAgYWRkLWNhcmQgZWxlbWVudHNcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZC1jYXJkJyk7XG5jb25zdCBhZGRpbmdGb3JtID0gcG9wdXBBZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLWFkZCcpO1xuXG4vLyBPdGhlciBkYXRhXG5jb25zdCBjYXJkc0NvbnRhaW5lclNlbCA9ICcuZWxlbWVudHMnO1xuY29uc3QgY2FyZHNDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZHNDb250YWluZXJTZWwpO1xuY29uc3QgZWRpdGluZ0Zvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uRGF0YSwgZWRpdGluZ0Zvcm0pO1xuZWRpdGluZ0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY29uc3QgYWRkaW5nRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25EYXRhLCBhZGRpbmdGb3JtKTtcbmFkZGluZ0Zvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLyBGaWxsaW5nIGNhcmRzIGRhdGFcbmNvbnN0IGluaXRpYWxDYXJkc0xpc3QgPSBuZXcgU2VjdGlvbih7XG4gIHJlbmRlcmVyOiAoY2FyZEl0ZW0pID0+IHtcbiAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChjYXJkSXRlbS5uYW1lLCBjYXJkSXRlbS5saW5rKTtcbiAgICBpbml0aWFsQ2FyZHNMaXN0LmFkZEl0ZW0oY2FyZCwgJ2JvdHRvbScpO1xuICB9LFxufSxcbiAgY2FyZHNDb250YWluZXJTZWxcbilcblxuaW5pdGlhbENhcmRzTGlzdC5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oeyBwcm9maWxlTmFtZVNlbDogJy5wcm9maWxlX19uYW1lJywgcHJvZmlsZUpvYlNlbDogJy5wcm9maWxlX19qb2InIH0pO1xuXG4vLyBQb3B1cCBFZGl0LUNhcmQgaGFuZGxpbmdcbmNvbnN0IHBvcHVwV2l0aEVkaXRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICcucG9wdXBfdHlwZV9lZGl0LWNhcmQnLFxuICB7XG4gICAgb3BlbkNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VySW5mb0RhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICAgICAgaW5wdXROYW1lLnZhbHVlID0gdXNlckluZm9EYXRhLm5hbWU7XG4gICAgICBpbnB1dEpvYi52YWx1ZSA9IHVzZXJJbmZvRGF0YS5qb2I7XG4gICAgICBlZGl0aW5nRm9ybVZhbGlkYXRvci52YWxpZGF0ZU9uT3BlbigpO1xuICAgIH0sXG4gICAgc3VibWl0Q2FsbGJhY2s6IChpbnB1dFZhbHVlcykgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5wdXRWYWx1ZXMpO1xuICAgIH1cbiAgfVxuKVxucG9wdXBXaXRoRWRpdEZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy8gUG9wdXAgQWRkLUNhcmQgaGFuZGxpbmdcbmNvbnN0IHBvcHVwV2l0aEFkZENhcmRGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICcucG9wdXBfdHlwZV9hZGQtY2FyZCcsXG4gIHtcbiAgICBvcGVuQ2FsbGJhY2s6ICgpID0+IHtcbiAgICAgIGFkZGluZ0Zvcm1WYWxpZGF0b3IudmFsaWRhdGVPbk9wZW4oKTtcbiAgICB9LFxuICAgIHN1Ym1pdENhbGxiYWNrOiAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBjcmVhdGVDYXJkKGlucHV0VmFsdWVzLnBsYWNlLCBpbnB1dFZhbHVlcy51cmwpO1xuICAgICAgYWRkQ2FyZChjYXJkLCAndG9wJyk7XG4gICAgfVxuICB9XG4pXG5wb3B1cFdpdGhBZGRDYXJkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vLyBQb3B1cCBJbWFnZSBoYW5kbGluZyBcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9waWMnKTtcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIEV2ZW50bGlzdGVuZXJzXG5lZGl0aW5nQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBwb3B1cFdpdGhFZGl0Rm9ybS5vcGVuKCkgfSk7XG5hZGRpbmdDYXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyBwb3B1cFdpdGhBZGRDYXJkRm9ybS5vcGVuKCkgfSk7XG5cbi8vIENyZWF0aW5nIGNhcmRcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKHRpdGxlLCB1cmwpIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHRpdGxlLFxuICAgIHVybCxcbiAgICB7XG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6IChpbWdTcmMsIGltZ0FsdCwgdGV4dCkgPT4ge1xuICAgICAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKGltZ1NyYywgaW1nQWx0LCB0ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICkuZ2V0Q2FyZCgpO1xuICByZXR1cm4gY2FyZDtcbn1cblxuLy8gQWRkaW5nIGNhcmQgXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2FyZChjYXJkLCBwb3MpIHtcbiAgcG9zID09PSAndG9wJ1xuICAgID8gY2FyZHNDb250YWluZXJFbC5wcmVwZW5kKGNhcmQpXG4gICAgOiBjYXJkc0NvbnRhaW5lckVsLmFwcGVuZChjYXJkKTtcbn0iXSwibmFtZXMiOlsidmFsaWRhdGlvbkRhdGEiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0dGluZ0J1dHRvblNlbGVjdG9yIiwiaW5wdXRFcnJvclNlbGVjdG9yIiwic3VibWl0dGluZ0J1dHRvbkludmFsaWQiLCJpbnB1dEludmFsaWQiLCJlcnJvclZpc2libGUiLCJDYXJkIiwidGl0bGUiLCJ1cmwiLCJoYW5kbGVDYXJkQ2xpY2siLCJfbGlrZUJ0biIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkIiwicmVtb3ZlIiwiX3RlbXBsYXRlIiwidGhpcyIsIl90aXRsZSIsIl91cmwiLCJfdGVtcGxhdGVTZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfdGV4dCIsIl9pbWciLCJfcmVtb3ZlQnRuIiwiX2hhbmRsZUNhcmRDbGljayIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pbnNlcnREYXRhIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiX3RvZ2dsZUxpa2UiLCJfY2xpY2tSZW1vdmUiLCJfY3JlYXRlQ2FyZCIsIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uT2JqZWN0IiwiX3ZhbGlkYXRpb25EYXRhIiwiX3ZhbGlkYXRpb25PYmplY3QiLCJfc3VibWl0dGluZ0J1dHRvbiIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3NldEV2ZW50TGlzdGVuZXIiLCJldmVyeSIsImlucHV0RWxlbWVudCIsInZhbHVlIiwiX3RvZ2dsZVN1Ym1pdFN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJuYW1lIiwiYWRkIiwiX2NoZWNrSWZBbGxJbnB1dElzVmFsaWQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJQb3B1cCIsInNlbGVjdG9yIiwiX3NlbGVjdG9yIiwiX3BvcHVwIiwiX3BvcHVwQ2xvc2VCdG4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsImN1cnJlbnRUYXJnZXQiLCJjbG9zZSIsImtleSIsIlBvcHVwV2l0aEltYWdlIiwiaW1nU3JjIiwiaW1nQWx0IiwidGV4dCIsIlNlY3Rpb24iLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsIml0ZW0iLCJwb3MiLCJwcmVwZW5kIiwiYXBwZW5kIiwiUG9wdXBXaXRoRm9ybSIsIm9wZW5DYWxsYmFjayIsInN1Ym1pdENhbGxiYWNrIiwiX29wZW5DYWxsYmFjayIsIl9zdWJtaXRDYWxsYmFjayIsIl9mb3JtIiwiX2Zvcm1JbnB1dHMiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiaW5wdXRWYWx1ZXMiLCJmb3JtSW5wdXQiLCJ2YWwiLCJVc2VySW5mbyIsInByb2ZpbGVOYW1lU2VsIiwicHJvZmlsZUpvYlNlbCIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlSm9iIiwiY29uc29sZSIsImxvZyIsImpvYiIsImVkaXRpbmdCdG4iLCJhZGRpbmdDYXJkQnRuIiwicG9wdXBFZGl0Q2FyZCIsImVkaXRpbmdGb3JtIiwiaW5wdXROYW1lIiwiaW5wdXRKb2IiLCJhZGRpbmdGb3JtIiwiY2FyZHNDb250YWluZXJTZWwiLCJjYXJkc0NvbnRhaW5lckVsIiwiZWRpdGluZ0Zvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiYWRkaW5nRm9ybVZhbGlkYXRvciIsImluaXRpYWxDYXJkc0xpc3QiLCJjYXJkSXRlbSIsImNhcmQiLCJjcmVhdGVDYXJkIiwibGluayIsImFkZEl0ZW0iLCJyZW5kZXJJdGVtcyIsInVzZXJJbmZvIiwicG9wdXBXaXRoRWRpdEZvcm0iLCJ1c2VySW5mb0RhdGEiLCJnZXRVc2VySW5mbyIsInZhbGlkYXRlT25PcGVuIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwV2l0aEFkZENhcmRGb3JtIiwicGxhY2UiLCJwb3B1cFdpdGhJbWFnZSIsIm9wZW4iLCJnZXRDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==